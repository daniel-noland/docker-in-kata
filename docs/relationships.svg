<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1920px" preserveAspectRatio="none" style="width:663px;height:1920px;" version="1.1" viewBox="0 0 663 1920" width="663px" zoomAndPan="magnify"><defs><filter height="300%" id="f3zeh8aflybby" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[512f144dd2613902ef3eb44d69b70cad]
cluster physical--><polygon fill="#FFFFFF" filter="url(#f3zeh8aflybby)" points="22,24.5,162,24.5,169,46.7969,641,46.7969,641,1908,22,1908,22,24.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="169" y1="46.7969" y2="46.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="134" x="26" y="39.4951">Physical Machine</text><!--MD5=[7087d43c4d56e69705bd063ac6078dcf]
cluster host.volumes--><path d="M265,215.5 C265,205.5 437.5,205.5 437.5,205.5 C437.5,205.5 610,205.5 610,215.5 L610,319.5 C610,329.5 437.5,329.5 437.5,329.5 C437.5,329.5 265,329.5 265,319.5 L265,215.5 " fill="#FFFFFF" filter="url(#f3zeh8aflybby)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M265,215.5 C265,225.5 437.5,225.5 437.5,225.5 C437.5,225.5 610,225.5 610,215.5 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="401" y="240.4951">host files</text><!--MD5=[3c860f157884091a1d956b7d06c4c4d5]
cluster proxy--><polygon fill="#FFFFFF" filter="url(#f3zeh8aflybby)" points="54,520,503,520,510,542.2969,609,542.2969,609,1876,54,1876,54,520" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="54" x2="510" y1="542.2969" y2="542.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="443" x="58" y="534.9951">Physical Machine Proxy Container (fairly high privileges)</text><!--MD5=[fcfdaedc11b847398348e55d20c6f383]
cluster proxy.volumes--><path d="M198,822 C198,812 370.5,812 370.5,812 C370.5,812 543,812 543,822 L543,926 C543,936 370.5,936 370.5,936 C370.5,936 198,936 198,926 L198,822 " fill="#FFFFFF" filter="url(#f3zeh8aflybby)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M198,822 C198,832 370.5,832 370.5,832 C370.5,832 543,832 543,822 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="300" y="846.9951">mounted volumes</text><!--MD5=[0863f59baade8b379cdd2e2383af7ad2]
cluster kataContainer--><polygon fill="#FFFFFF" filter="url(#f3zeh8aflybby)" points="102,1071,419,1071,426,1093.2969,569,1093.2969,569,1836,102,1836,102,1071" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="102" x2="426" y1="1093.2969" y2="1093.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="106" y="1085.9951">Kata Container (offers full VM isolation)</text><!--MD5=[c5d23d3f4cf5d90ec7b523c156190c82]
cluster kata.volumes--><path d="M192,1132 C192,1122 364.5,1122 364.5,1122 C364.5,1122 537,1122 537,1132 L537,1236 C537,1246 364.5,1246 364.5,1246 C364.5,1246 192,1246 192,1236 L192,1132 " fill="#FFFFFF" filter="url(#f3zeh8aflybby)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M192,1132 C192,1142 364.5,1142 364.5,1142 C364.5,1142 537,1142 537,1132 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="294" y="1156.9951">mounted volumes</text><!--MD5=[ed2bbcf4b9af81602a96182db3ca526e]
cluster isolatedContainer--><polygon fill="#FFFFFF" filter="url(#f3zeh8aflybby)" points="150,1683,519,1683,526,1705.2969,529,1705.2969,529,1796,150,1796,150,1683" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="150" x2="526" y1="1705.2969" y2="1705.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="363" x="154" y="1697.9951">Isolated container (fairly restricted privileges)</text><!--MD5=[cbc661716e566c6840a1f3326585d682]
entity initialSetup--><ellipse cx="349" cy="69.5" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M349,77.5 L349,104.5 M336,85.5 L362,85.5 M349,104.5 L336,119.5 M349,104.5 L362,119.5 " fill="none" filter="url(#f3zeh8aflybby)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="298" y="139.4951">initial_setup.sh</text><!--MD5=[1ffdb4c4ef86d1c22e8e7597c6624707]
entity runScript--><ellipse cx="207" cy="253" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M207,261 L207,288 M194,269 L220,269 M207,288 L194,303 M207,288 L220,303 " fill="none" filter="url(#f3zeh8aflybby)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="185" y="322.9951">run.sh</text><!--MD5=[12c8e1343d8ac8b5522030e7dff4b3ac]
entity outerDocker--><rect fill="#FEFECE" filter="url(#f3zeh8aflybby)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="120.5" y="403"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="249.5" y="408"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="247.5" y="410"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="247.5" y="414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="135.5" y="435.9951">docker daemon</text><!--MD5=[567ec455f4980ea5e683933f7d6828d8]
entity dockerImg.host--><ellipse cx="523" cy="284.5" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="460" y="314.4951">var_lib_docker.img</text><!--MD5=[3deb5f9402b1c31d01a14b6f14e708bb]
entity kataInDocker.host--><ellipse cx="349" cy="284.5" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="288.5" y="314.4951">kata-in-docker.tar</text><!--MD5=[c45c25246028dcb2f25a58c9a29627ca]
entity systemd--><rect fill="#FEFECE" filter="url(#f3zeh8aflybby)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="151.5" y="563"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="230.5" y="568"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="228.5" y="570"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="228.5" y="574"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="166.5" y="595.9951">systemd</text><!--MD5=[abb671a16ef4134c19504ae6015d03ea]
entity kataDocker--><rect fill="#FEFECE" filter="url(#f3zeh8aflybby)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="95" y="686"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="287" y="691"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="285" y="693"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="285" y="697"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="110" y="718.9951">docker daemon</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="172" x="110" y="735.292">(can run kata containers)</text><!--MD5=[a0b32f6b1835dcc38d87c1b0ef5a982c]
entity kataInDocker.proxy--><ellipse cx="282" cy="891" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="221.5" y="920.9951">kata-in-docker.tar</text><!--MD5=[7d87ccc14019075ce4dd3c47775c4c8c]
entity dockerImg.proxy--><ellipse cx="456" cy="891" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="393" y="920.9951">var_lib_docker.img</text><!--MD5=[4cd4232f2d70ff5d61bb5e9fbaba3380]
entity loop0--><path d="M390,1319 C390,1309 437,1309 437,1309 C437,1309 484,1309 484,1319 L484,1344.2969 C484,1354.2969 437,1354.2969 437,1354.2969 C437,1354.2969 390,1354.2969 390,1344.2969 L390,1319 " fill="#FEFECE" filter="url(#f3zeh8aflybby)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M390,1319 C390,1329 437,1329 437,1329 C437,1329 484,1329 484,1319 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="400" y="1345.9951">/dev/loop0</text><!--MD5=[3ab89b5bf5744a9391bf61799d25b47c]
entity varLibDocker--><ellipse cx="373" cy="1460" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="324" y="1489.9951">/var/lib/docker</text><!--MD5=[6f1724d4bb9453a3335b299dec473590]
entity nestedSystemd--><rect fill="#FEFECE" filter="url(#f3zeh8aflybby)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="156.5" y="1437"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="235.5" y="1442"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="233.5" y="1444"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="233.5" y="1448"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="171.5" y="1469.9951">systemd</text><!--MD5=[85f7c2a35190767c524f7d630099d480]
entity nestedDocker--><rect fill="#FEFECE" filter="url(#f3zeh8aflybby)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="170.5" y="1566"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="299.5" y="1571"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="297.5" y="1573"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="297.5" y="1577"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="185.5" y="1598.9951">docker daemon</text><!--MD5=[37b01abc53760bceb5ee3134e2910d32]
entity kataInDocker.kata--><ellipse cx="276" cy="1201" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="215.5" y="1230.9951">kata-in-docker.tar</text><!--MD5=[952258b859ffeecd0549b744e13a3be8]
entity dockerImg.kata--><ellipse cx="450" cy="1201" fill="#FEFECE" filter="url(#f3zeh8aflybby)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="387" y="1230.9951">var_lib_docker.img</text><!--MD5=[0e31a6a5f01ec74295b71ef1bffeddb7]
entity isolatedProcess--><rect fill="#FEFECE" filter="url(#f3zeh8aflybby)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="188" x="298" y="1726"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="466" y="1731"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="464" y="1733"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="464" y="1737"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="313" y="1758.9951">your isolated process</text><!--MD5=[6324140683fc9ca9773bd976e3542aee]
link initialSetup to proxy--><path d="M297.93,118.47 C258.1,133.57 203.72,159.4 168,197.5 C107.415,262.115 80.855,357.9875 69.4713,438.2012 C66.6253,458.2547 64.7279,477.3295 63.4845,494.6925 C62.8628,503.374 62.4046,511.6276 62.073,519.3616 " fill="none" id="initialSetup-&gt;proxy" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="62.073,519.3616,66.4548,510.5411,62.2872,514.3662,58.4621,510.1985,62.073,519.3616" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="86" y="369.0669">creates image</text><!--MD5=[d7d27019aaf9b3743293bdcc2a8fdbb5]
link runScript to outerDocker--><path d="M203.5,326.22 C201.52,349.21 199.1,377.31 197.35,397.65 " fill="none" id="runScript-&gt;outerDocker" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="196.92,402.65,201.6782,394.0268,197.3494,397.6685,193.7078,393.3397,196.92,402.65" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="201" y="369.0669">tells to start proxy container</text><!--MD5=[a7e842b29e60a08e468fb23d19585943]
link outerDocker to proxy--><path d="M158.77,449.05 C122.11,471.41 70.69,502.89 70,504 C67.6788,507.715 65.8023,511.718 64.2971,515.8847 C63.9208,516.9264 63.5677,517.9783 63.2366,519.0385 C63.1538,519.3035 63.0724,519.5691 62.9924,519.8352 " fill="none" id="outerDocker-&gt;proxy" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="62.9924,519.8352,69.4153,512.3688,64.4326,515.0471,61.7544,510.0644,62.9924,519.8352" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="108" y="492.0669">launches kata-in-docker</text><!--MD5=[5f21b3f8d18146fa2f3090557eb1c208]
link initialSetup to dockerImg.host--><path d="M388.05,142.73 C427.8,184.2 486.99,245.93 511.61,271.62 " fill="none" id="initialSetup-&gt;dockerImg.host" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="515.26,275.43,511.9112,266.1679,511.7967,271.8236,506.141,271.7091,515.26,275.43" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="431" y="185.5669">creates and formats as btrfs</text><!--MD5=[bb6857c37b591977226190267f8a63bf]
link initialSetup to kataInDocker.host--><path d="M347.65,142.63 C347.38,152.41 347.14,162.83 347,172.5 C346.5,207.88 347.74,249.6 348.49,270.38 " fill="none" id="initialSetup-&gt;kataInDocker.host" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="348.68,275.42,352.3432,266.2777,348.4944,270.4234,344.3487,266.5747,348.68,275.42" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="348" y="185.5669">creates</text><!--MD5=[acae5ee847afa28913e4984ec1123219]
reverse link kataInDocker.host to kataInDocker.proxy--><path d="M358.83,297.7 C368.92,311.09 383.97,333.65 390,356 C391.97,363.3 390.39,365.45 390,373 C389.39,384.8 350.06,784.91 346,796 C332.98,831.6 303.49,866.67 289.56,881.99 " fill="none" id="kataInDocker.host&lt;-kataInDocker.proxy" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="355.62,293.53,357.9352,303.1029,358.6679,297.4937,364.2771,298.2263,355.62,293.53" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="378" y="590.5669">volume mounts</text><!--MD5=[5a6af643af1a01aa3c8056ca1f772b7c]
reverse link dockerImg.host to dockerImg.proxy--><path d="M523,298.77 C523,323.56 523,378.62 523,425 C523,425 523,425 523,718.5 C523,785.63 477.91,858.03 461.71,881.88 " fill="none" id="dockerImg.host&lt;-dockerImg.proxy" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="523,293.68,519,302.68,523,298.68,527,302.68,523,293.68" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="524" y="590.5669">volume mounts</text><!--MD5=[6aaf671dba2f4b13070a0720cd9a609a]
reverse link kataDocker to kataInDocker.proxy--><path d="M217.78,754.03 C237.1,794.94 267.54,859.39 278.18,881.91 " fill="none" id="kataDocker&lt;-kataInDocker.proxy" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="215.48,749.16,215.7138,759.0061,217.6186,753.6796,222.9451,755.5843,215.48,749.16" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="237" y="792.0669">loads</text><!--MD5=[cc12d28283cff26d9af79d0114277555]
link systemd to kataDocker--><path d="M201,609.26 C201,628.89 201,657.85 201,680.73 " fill="none" id="systemd-&gt;kataDocker" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="201,685.81,205,676.81,201,680.81,197,676.81,201,685.81" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="202" y="652.0669">launches</text><!--MD5=[9d108661298ab10a553c67cd2fc41149]
reverse link kataInDocker.proxy to kataInDocker.kata--><path d="M281.74,905.43 C280.71,958.14 276.97,1149.98 276.16,1191.88 " fill="none" id="kataInDocker.proxy&lt;-kataInDocker.kata" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="281.84,900.24,277.6608,909.1582,281.74,905.239,285.6592,909.3182,281.84,900.24" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="280" y="1012.0669">volume mounts</text><!--MD5=[59669e665e06411d7e3b7281e824156f]
reverse link dockerImg.proxy to dockerImg.kata--><path d="M455.74,905.43 C454.71,958.14 450.97,1149.98 450.16,1191.88 " fill="none" id="dockerImg.proxy&lt;-dockerImg.kata" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="455.84,900.24,451.6608,909.1582,455.74,905.239,459.6592,909.3182,455.84,900.24" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="454" y="1012.0669">volume mounts</text><!--MD5=[833905760a8051e33f231436769fb1f2]
reverse link loop0 to varLibDocker--><path d="M423.72,1358.74 C409.09,1387.66 386.41,1432.49 377.15,1450.79 " fill="none" id="loop0&lt;-varLibDocker" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="426,1354.25,418.3654,1360.472,423.7411,1358.7106,425.5025,1364.0863,426,1354.25" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="411" y="1397.0669">backing block device</text><!--MD5=[fe63e33c6fe821e0eed5100291c52c50]
reverse link varLibDocker to nestedDocker--><path d="M360.89,1473.02 C339.49,1494.25 294.7,1538.69 267.5,1565.68 " fill="none" id="varLibDocker&lt;-nestedDocker" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="364.6,1469.33,355.3864,1472.8098,361.0431,1472.844,361.0088,1478.5008,364.6,1469.33" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="313" y="1532.0669">storage for all images and containers</text><!--MD5=[bdc42967c27e98890d6aeb0e660f8e90]
link kataDocker to kataContainer--><path d="M186.32,749.34 C166.29,793.19 131.24,876.65 117,952 C111.96,978.665 108.9769,1007.225 107.3434,1035.1325 C106.9351,1042.1094 106.6111,1049.0455 106.3604,1055.901 C106.235,1059.3287 106.128,1062.7363 106.0379,1066.1188 C106.0154,1066.9644 105.9939,1067.8085 105.9735,1068.6509 C105.9633,1069.0721 105.9534,1069.4929 105.9437,1069.9133 " fill="none" id="kataDocker-&gt;kataContainer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="105.9437,1069.9133,110.1501,1061.0079,106.059,1064.9146,102.1522,1060.8234,105.9437,1069.9133" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="118" y="965.0669">launches kata-in-docker</text><!--MD5=[89fe536d2e9fc33b7b1e4a8073144aba]
link nestedSystemd to nestedDocker--><path d="M200.86,1483.31 C198.35,1498.58 197.01,1519.04 203,1536 C206.26,1545.23 211.94,1554.03 218.08,1561.67 " fill="none" id="nestedSystemd-&gt;nestedDocker" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="221.53,1565.79,218.8273,1556.3192,218.3234,1561.9536,212.6891,1561.4497,221.53,1565.79" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="204" y="1532.0669">launches</text><!--MD5=[d8f72050d51151babe1cc7e3c87f7823]
link nestedDocker to isolatedContainer--><path d="M245,1612.3 C245,1623.0175 245,1636.6781 245,1651.1842 C245,1658.4373 245,1665.9017 245,1673.3153 C245,1675.1686 245,1677.0189 245,1678.8618 C245,1679.7833 245,1680.7029 245,1681.6202 C245,1682.0789 245,1682.537 245,1682.9944 " fill="none" id="nestedDocker-&gt;isolatedContainer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="245,1682.9944,249,1673.9944,245,1677.9944,241,1673.9944,245,1682.9944" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="246" y="1655.0669">launches any container via runc</text><!--MD5=[ffdc88745486a15d1db82e571960fb90]
reverse link dockerImg.kata to loop0--><path d="M448.67,1215.13 C446.44,1237.19 441.92,1281.9 439.2,1308.72 " fill="none" id="dockerImg.kata&lt;-loop0" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="449.19,1210.04,444.3094,1218.5945,448.6897,1215.0149,452.2693,1219.3951,449.19,1210.04" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="444" y="1275.0669">backing file</text><!--MD5=[ca48d0913ed650f658a4838c2079af77]
@startuml
skinparam componentStyle uml2

package "Physical Machine" as physical {
    initial_setup.sh as initialSetup
    initialSetup ....> proxy : creates image
    run.sh as runScript
    [docker daemon] as outerDocker
    runScript - -> outerDocker : tells to start proxy container
    outerDocker - -> proxy : launches kata-in-docker

    database "host files" as host.volumes {
        () var_lib_docker.img as dockerImg.host
        () "kata-in-docker.tar" as kataInDocker.host
        initialSetup - -> dockerImg.host : creates and formats as btrfs
        initialSetup - -> kataInDocker.host : creates
    }
    package "Physical Machine Proxy Container (fairly high privileges)" as proxy {
        database "mounted volumes" as proxy.volumes {
            () "kata-in-docker.tar" as kataInDocker.proxy
            () var_lib_docker.img as dockerImg.proxy
            kataInDocker.host <- - - kataInDocker.proxy : volume mounts
            dockerImg.host <- - - dockerImg.proxy : volume mounts
        }
        [systemd]
        component kataDocker [
            docker daemon
            (can run kata containers)
        ]
        kataDocker <- - kataInDocker.proxy : loads
        systemd - -> kataDocker : launches
        package "Kata Container (offers full VM isolation)" as kataContainer {
            database "mounted volumes" as kata.volumes {
                () "kata-in-docker.tar" as kataInDocker.kata
                () var_lib_docker.img as dockerImg.kata
                kataInDocker.proxy <- - - kataInDocker.kata : volume mounts
                dockerImg.proxy <- - - dockerImg.kata : volume mounts
            }
            database "/dev/loop0" as loop0
            () "/var/lib/docker" as varLibDocker
            loop0 <.. varLibDocker : backing block device
            [systemd] as nestedSystemd
            component "docker daemon" as nestedDocker
            varLibDocker <.. nestedDocker : storage for all images and containers
            package "Isolated container (fairly restricted privileges)" as isolatedContainer {
                [your isolated process] as isolatedProcess
            }
        }
        kataDocker - -> kataContainer : launches kata-in-docker
        nestedSystemd - -> nestedDocker : launches
        nestedDocker - -> isolatedContainer : launches any container via runc
    }
    dockerImg.kata <.. loop0 : backing file
}

@enduml

PlantUML version 1.2019.12(Sun Nov 03 03:24:54 MST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>